---
import '../styles/global.css';

export interface Props {
  title?: string;
  description?: string;
  schema?: string;
}

const {
  title = "BOXING Club COLAK",
  description = "Club de boxe anglaise à La Louvière – discipline, encadrement et progression.",
  schema,
} = Astro.props;

const navLinks = [
  { href: "/", title: "Accueil" },
  { href: "/club", title: "Le Club" },
  { href: "/contact", title: "Contact" },
];

const currentPath = Astro.url.pathname.replace(/\/$/, "");
const currentYear = new Date().getFullYear();

const phoneDisplay = "0487 11 88 77";
const phoneValue = "+32487118877";
const emailClub = "mirac.colak@outlook.com";
---

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content={description} />
  <title>{title}</title>

  <link rel="canonical" href={Astro.url.href} />
  {schema && <script type="application/ld+json" set:html={schema} />}

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Bebas+Neue&display=swap" rel="stylesheet" />

  <style is:global>
    :root {
      --header-height: 80px;
      --color-accent: #c79d31;
      --color-title: #f9d77a;
      --color-text-muted: #a0a0a0;
      --font-accent: 'Bebas Neue', sans-serif;
    }

    @media (max-width: 768px) {
      :root { --header-height: 70px; }
    }

    body.menu-open { overflow: hidden; }

    /* HEADER */
    .site-header {
      position: fixed;
      top: 0;
      width: 100%;
      height: var(--header-height);
      z-index: 1100;
      background: rgba(0,0,0,0.85);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(199,157,49,0.2);
    }

    .header-wrapper {
      max-width: 1400px;
      height: 100%;
      margin: 0 auto;
      padding: 0 5%;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo-container { height: 50px; }
    .logo-img { height: 100%; }

    .desktop-only { display: flex; }

    .nav-list {
      display: flex;
      gap: 3rem;
      list-style: none;
    }

    .nav-link {
      font-family: var(--font-accent);
      font-size: 1.1rem;
      letter-spacing: 1px;
      color: #fff;
      text-decoration: none;
      text-transform: uppercase;
    }

    .nav-link.active,
    .nav-link:hover {
      color: var(--color-accent);
    }

    /* MOBILE */
    .mobile-menu-toggle {
      display: none;
      background: none;
      border: none;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .desktop-only { display: none; }
      .mobile-menu-toggle { display: block; }
    }

    .burger-icon {
      width: 25px;
      height: 18px;
      position: relative;
    }

    .burger-icon span {
      position: absolute;
      height: 2px;
      width: 100%;
      background: #fff;
      left: 0;
    }

    .burger-icon span:nth-child(1) { top: 0; }
    .burger-icon span:nth-child(2) { top: 8px; }
    .burger-icon span:nth-child(3) { top: 16px; }

    .mobile-menu-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.96);
      display: none;
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }

    .mobile-menu-overlay.is-open {
      display: flex;
    }

    .mobile-nav ul {
      list-style: none;
      text-align: center;
      padding: 0;
    }

    .mobile-nav a {
      font-family: var(--font-accent);
      font-size: 2.4rem;
      color: #fff;
      text-decoration: none;
      display: block;
      padding: 12px 0;
    }

    .mobile-close {
      position: absolute;
      top: 25px;
      right: 25px;
      font-size: 2rem;
      color: #fff;
      background: none;
      border: none;
      cursor: pointer;
    }

    /* FOOTER */
    .site-footer {
      background: #050505;
      padding: 70px 0 0;
      border-top: 1px solid rgba(199,157,49,0.1);
      color: #fff;
    }

    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 5%;
    }

    .footer-grid {
      display: grid;
      grid-template-columns: 1.5fr 1fr 1fr;
      gap: 60px;
    }

    @media (max-width: 768px) {
      .footer-grid {
        grid-template-columns: 1fr;
        gap: 40px;
        text-align: center;
      }
    }

    .footer-logo {
      height: 60px;
      margin-bottom: 20px;
    }

    .footer-tagline {
      color: var(--color-text-muted);
      margin-bottom: 20px;
    }

    .footer-h3 {
      font-family: var(--font-accent);
      color: var(--color-title);
      margin-bottom: 15px;
      letter-spacing: 2px;
    }

    .footer-list {
      list-style: none;
      padding: 0;
    }

    .footer-list li {
      margin-bottom: 10px;
    }

    .footer-list a,
    .contact-item {
      color: var(--color-text-muted);
      text-decoration: none;
      font-size: 0.95rem;
    }

    .footer-legal {
      margin-top: 50px;
      padding: 25px 0;
      border-top: 1px solid rgba(255,255,255,0.05);
      font-size: 0.75rem;
      text-align: center;
      opacity: 0.7;
    }
  </style>
</head>

<body>
<header class="site-header">
  <div class="header-wrapper">
    <a href="/" class="logo-container">
      <img src="/logo.png" alt="Club COLAK" class="logo-img" />
    </a>

    <nav class="desktop-only">
      <ul class="nav-list">
        {navLinks.map(link => (
          <li>
            <a href={link.href} class:list={["nav-link", { active: currentPath === link.href }]}>{link.title}</a>
          </li>
        ))}
      </ul>
    </nav>

    <button class="mobile-menu-toggle" id="menu-btn">
      <div class="burger-icon"><span></span><span></span><span></span></div>
    </button>
  </div>
</header>

<div class="mobile-menu-overlay" id="mobile-overlay">
  <button class="mobile-close" id="menu-close">✕</button>
  <nav class="mobile-nav">
    <ul>
      {navLinks.map(link => (
        <li><a href={link.href} class="mobile-link">{link.title}</a></li>
      ))}
    </ul>
  </nav>
</div>

<main>
  <slot />
</main>

<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-grid">
      <div>
        <img src="/logo.png" class="footer-logo" />
        <p class="footer-tagline">Discipline. Encadrement. Progression.</p>
      </div>

      <div>
        <h3 class="footer-h3">Navigation</h3>
        <ul class="footer-list">
          {navLinks.map(link => <li><a href={link.href}>{link.title}</a></li>)}
        </ul>
      </div>

      <div>
        <h3 class="footer-h3">Contact</h3>
        <ul class="footer-list">
          <li class="contact-item">Rue de l'Olive 13A<br/>7100 La Louvière</li>
          <li class="contact-item"><a href={`tel:${phoneValue}`}>{phoneDisplay}</a></li>
          <li class="contact-item"><a href={`mailto:${emailClub}`}>{emailClub}</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-legal">
      © {currentYear} Boxing Club COLAK — Tous droits réservés
    </div>
  </div>
</footer>

<script>
  if (typeof window !== "undefined") {
    const menuBtn = document.getElementById('menu-btn');
    const closeBtn = document.getElementById('menu-close');
    const overlay = document.getElementById('mobile-overlay');
    const links = document.querySelectorAll('.mobile-link');

    const closeMenu = () => {
      overlay.classList.remove('is-open');
      document.body.classList.remove('menu-open');
    };

    menuBtn?.addEventListener('click', () => {
      overlay.classList.add('is-open');
      document.body.classList.add('menu-open');
    });

    closeBtn?.addEventListener('click', closeMenu);
    overlay?.addEventListener('click', e => e.target === overlay && closeMenu());
    links.forEach(l => l.addEventListener('click', closeMenu));
  }
</script>
</body>
</html>
